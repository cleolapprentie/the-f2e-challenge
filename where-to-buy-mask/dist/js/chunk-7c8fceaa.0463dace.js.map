{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/components/Map.vue?0628","webpack:///./src/components/Map.vue?475f","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue"],"names":["$","$values","values","target","stat","O","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","key","keys","length","i","result","call","push","module","exports","entries","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","proto","forced","callbackfn","this","arguments","undefined","render","_vm","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","attrs","name","components","setup","createMap","map","root","$utils","center","zoom","minZoom","maxZoom","createTileLayer","baseLayer","flyToCurrentPos","closePopup","setView","latitude","longitude","focusPoint","flyTo","latlng","marker","openPopup","component"],"mappings":"qGAAA,IAAIA,EAAI,EAAQ,QACZC,EAAU,EAAQ,QAAgCC,OAItDF,EAAE,CAAEG,OAAQ,SAAUC,MAAM,GAAQ,CAClCF,OAAQ,SAAgBG,GACtB,OAAOJ,EAAQI,O,iDCPnB,IAAIC,EAAc,EAAQ,QACtBC,EAAa,EAAQ,QACrBC,EAAkB,EAAQ,QAC1BC,EAAuB,EAAQ,QAA8CC,EAG7EC,EAAe,SAAUC,GAC3B,OAAO,SAAUC,GACf,IAKIC,EALAT,EAAIG,EAAgBK,GACpBE,EAAOR,EAAWF,GAClBW,EAASD,EAAKC,OACdC,EAAI,EACJC,EAAS,GAEb,MAAOF,EAASC,EACdH,EAAMC,EAAKE,KACNX,IAAeG,EAAqBU,KAAKd,EAAGS,IAC/CI,EAAOE,KAAKR,EAAa,CAACE,EAAKT,EAAES,IAAQT,EAAES,IAG/C,OAAOI,IAIXG,EAAOC,QAAU,CAGfC,QAASZ,GAAa,GAGtBT,OAAQS,GAAa,K,oCC7BvB,IAAIX,EAAI,EAAQ,QACZwB,EAAQ,EAAQ,QAAgCC,KAChDC,EAAmB,EAAQ,QAC3BC,EAA0B,EAAQ,QAElCC,EAAO,OACPC,GAAc,EAEdC,EAAiBH,EAAwBC,GAGzCA,IAAQ,IAAIG,MAAM,GAAGH,IAAM,WAAcC,GAAc,KAI3D7B,EAAE,CAAEG,OAAQ,QAAS6B,OAAO,EAAMC,OAAQJ,IAAgBC,GAAkB,CAC1EL,KAAM,SAAcS,GAClB,OAAOV,EAAMW,KAAMD,EAAYE,UAAUpB,OAAS,EAAIoB,UAAU,QAAKC,MAKzEX,EAAiBE,I,oCCvBjB,0BAAgiB,EAAG,G,yCCAniB,IAAIU,EAAS,WAAa,IAAIC,EAAIJ,KAASK,EAAGD,EAAIE,eAAsBF,EAAIG,MAAMC,GAAO,OAAOJ,EAAIK,GAAG,IACnGC,EAAkB,CAAC,WAAa,IAAIN,EAAIJ,KAASK,EAAGD,EAAIE,eAAmBE,EAAGJ,EAAIG,MAAMC,IAAIH,EAAG,OAAOG,EAAG,MAAM,CAACG,YAAY,OAAO,CAACH,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,uB,8ECQ9J,OACA,OAEA,GACEC,KAAM,WACNC,WAAY,GAEZC,MAJF,SAIA,EAJA,GAIA,aACI,OAAJ,OAAI,mCAAJ,oGACA,IACA,oCACA,yEACA,UAJA,4CAQI,OAAJ,OAAI,EAAJ,WACM,EAAN,wBAGI,IAAJ,+DACA,+DAEI,SAASC,IAAb,uMACMC,EAAMC,EAAKC,OAAOF,IAAID,UAAU,gBAAiB,CAC/CI,OAAQ,CAAhB,aACQC,KAAMA,EACNC,QAAS,EACTC,QAAS,IACjB,SACM,IAAN,uDACML,EAAKC,OAAOF,IAAIO,gBAAgBP,EAAKQ,EAAW,CAC9CH,QAAS,EACTC,QAAS,KAiBb,SAASG,IAAb,MACA,UADA,EACA,YADA,EACA,SACUT,GAOFA,EAAIU,aACJV,EAAIW,QAAQ,CAApB,kBAEQZ,EAAUa,EAAUC,EAAW,IAInC,SAASC,EAAb,KACMd,EAAIe,MAAMC,GACVC,EAAOC,YA/BT,OAAJ,OAAI,CAAJ,EAAI,WAAJ,yJACA,wBACA,UADA,EACA,WADA,EACA,UACA,IACA,EAIA,4BAHA,uCACA,kCANA,gGAAI,MC9CyU,I,wBCQzUC,EAAY,eACd,EACAjC,EACAO,GACA,EACA,KACA,WACA,MAIa,aAAA0B,E","file":"js/chunk-7c8fceaa.0463dace.js","sourcesContent":["var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.github.io/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=95d0c2b0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=95d0c2b0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Map\"},[_c('div',{attrs:{\"id\":\"map-container\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"Map\">\n    <div id=\"map-container\"></div>\n  </div>\n</template>\n\n<script>\nimport { onMounted, computed, watch, onBeforeUnmount } from '@vue/composition-api'\nimport { EventBus } from '@/utils/event-bus.js'\nlet map = null\nlet marker = null\n\nexport default {\n  name: 'mask-map',\n  components: {},\n\n  setup (props, { root }) {\n    onMounted(async () => {\n      createMap()\n      EventBus.$on('showPos', (id, latlng) => {\n        const targetMarker = Object.values(map._layers).find(layer => layer.storeID === id)\n        focusPoint(latlng, targetMarker)\n      })\n    })\n\n    onBeforeUnmount(() => {\n      EventBus.$off('showPos')\n    })\n\n    const maskData = computed(() => root.$store.state.maskData)\n    const coords = computed(() => root.$store.state.location)\n\n    function createMap (la = 25.033408, long = 121.564099, zoom = 12) {\n      map = root.$utils.map.createMap('map-container', {\n        center: { lng: long, lat: la },\n        zoom: zoom,\n        minZoom: 8,\n        maxZoom: 16\n      }, maskData.value)\n      const baseLayer = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\n      root.$utils.map.createTileLayer(map, baseLayer, {\n        minZoom: 8,\n        maxZoom: 18\n      })\n    }\n\n    watch(coords, async (prev, next) => {\n      if (map && coords.value.latitude) {\n        const { latitude, longitude } = coords.value\n        flyToCurrentPos()\n        if (!marker) {\n          marker = root.$utils.map.setPosMarker(map, coords.value)\n          root.$utils.map.pinMark(map, maskData.value)\n        } else {\n          marker.setLatLng({ lat: latitude, lng: longitude })\n        }\n      }\n    })\n\n    function flyToCurrentPos () {\n      const { longitude, latitude } = coords.value\n      if (map) {\n        // const oCoords = Object.values(map.getCenter())\n        // const nCoords = [latitude, longitude]\n        // map.fitBounds([oCoords, nCoords], {\n        //   paddingBottomRight: [80, 160],\n        //   maxZoom: 16\n        // })\n        map.closePopup()\n        map.setView({ lng: longitude, lat: latitude }, 15)\n      } else {\n        createMap(latitude, longitude, 15)\n      }\n    }\n\n    function focusPoint (latlng, marker) {\n      map.flyTo(latlng)\n      marker.openPopup()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.Map {\n  width: 100%;\n}\n\n#map-container {\n  height: 100%;\n}\n\n.popup__title {\n  text-align: center;\n}\n\n.leaflet-popup-content {\n  > .popup__title {\n    text-align: center;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=95d0c2b0&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=95d0c2b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95d0c2b0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}